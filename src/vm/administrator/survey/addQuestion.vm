<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">#parse("snippets/compliance/complianceHead.vm")<head><script type="text/javascript" src="javascript/jquery-1.2.6.min.js"></script><script language="javascript" type="text/javascript" src="javascript/360js.js"></script><script type="text/javascript" language="javascript" src="javascript/js_manager.js"></script><script type='text/javascript' src='javascript/jquery.simplemodal.js' ></script><script type='text/javascript' src='javascript/js_survey.js' ></script><script language="javascript" type="text/javascript">        </script><script type='text/javascript'>	$(document).ready(function() {        $('#sideBar').height($('.scrollable').height());    });  function confirm(message, callback) {                $('#deleteConfirmation').modal({                    close:false,                    position: ["40%",],                    overlayId:'confirmModalOverlay',                    containerId:'confirmModalContainer',                     onShow: function (dialog) {                        dialog.data.find('.message').append(message);                        // if the user clicks "yes"                        dialog.data.find('.yes').click(function () {                            // call the callback                            if (jQuery.isFunction(callback)) {                                callback.apply();                            }                            // close the dialog                            jQuery.modal.close();                        });                    }                });        }        function cancelQuestions(){                document.getElementById('actionmethod').value='cancelQuestionAndDisplaySurveys';                document.editSurveyForm.submit();        }        function saveQuestions(){                document.getElementById('actionmethod').value='saveQuestionAndDisplaySurveys';                document.editSurveyForm.submit();        }        function deleteQuestions(buttonclick,countCheckBoxes) {                if ($("INPUT[type='checkbox'][name='deleteableQuestions']:checked").length>0) {                        confirm("$brander.getBrandElement("lms.manageUser.searchLearner.messageBox.sure")", function () {                                document.getElementById('actionmethod').value=buttonclick;                                document.editSurveyForm.submit();                        });                } else {                        $('#selectLearner').modal({close:false,position: ["40%",]});                }        }        function refresh(){                document.getElementById('actionmethod').value = "refreshQuestions";                document.editSurveyForm.submit();        }        function onSelectQuestion(checkbox,id,startIndex,lastIndex) {                var tr=checkbox.parentNode.parentNode;            var tdarr=$(tr).find("td");            if (checkbox.checked) {                for(i=0;i<tdarr.size();i++){                    tdarr[i].style.background="#E9F9FE";                }            } else {                for(i=0;i<tdarr.size();i++){                   // tdarr[i].removeAttribute("style");					 tdarr[i].style.background="none";                }            }                document.getElementById(id).value = checkbox.checked;                                if(lastIndex>0){                        var stat=0;                        for(var i = startIndex; i <= lastIndex; i++){                                var chkid = "deleteableQuestionsChk[" + i + "]";                                var objCheckBox=document.getElementById(chkid);                                if(objCheckBox.checked){                                stat=1;                                break;                                }                        }                }        }        function selectAllCheckBoxes(countCheckBoxes, startIndex, lastIndex)        {                var objCheckAll=document.getElementById("chkAll");                if (objCheckAll.checked) {                        for(var i = startIndex; i <= lastIndex; i++){                                var chkid = "deleteableQuestionsChk[" + i + "]";                                var objCheckBox=document.getElementById(chkid);                                objCheckBox.checked=true;                                var hiddenid = "deleteableQuestions[" + i + "]";                                onSelectQuestion(objCheckBox,hiddenid,0,0);                        }                        var btnDelete=document.getElementById("btnDelete");                        btnDelete.disabled=false;                }else{                        for(var i = startIndex; i <= lastIndex; i++){                                var chkid = "deleteableQuestionsChk[" + i + "]";                                var objCheckBox=document.getElementById(chkid);                                objCheckBox.checked=false;                                var hiddenid = "deleteableQuestions[" + i + "]";                                onSelectQuestion(objCheckBox,hiddenid,0,0);                        }                }        }        function onAllPage(){                document.getElementById('pageIndex').value=0;                document.getElementById('actionmethod').value="showAllQuestions";                document.getElementById('gridShowAll').value="true";                document.editSurveyForm.submit();        }        function onNextPage(nextIndex){                document.getElementById('pageIndex').value=nextIndex;                document.getElementById('actionmethod').value="refreshQuestions";                document.getElementById('gridShowAll').value="false";                document.editSurveyForm.submit();        }        function onPreviousPage(previousIndex){                document.getElementById('pageIndex').value=previousIndex;                document.getElementById('actionmethod').value="refreshQuestions";                document.getElementById('gridShowAll').value="false";                document.editSurveyForm.submit();        }		function changeQuestionOrder(qid,param)		{					 document.getElementById('actionmethod').value="moveQuestion";			 document.getElementById('moveParam').value=param;			 document.getElementById('qid').value=qid;			 document.getElementById('gridShowAll').value="true";			 document.editSurveyForm.submit();		}                  </script></head><body> <form name="editSurveyForm" method="POST" action="adm_manageSyrvey.do">  <input type="hidden" id="actionmethod" name="method" value=""/>  #springBind("manageSurveyForm.sid")  <input type="hidden" name="sid" value="$status.value"/>                                                <input type="hidden" id="qid" name="qid" value=""/>						<input type="hidden" id="moveParam" name="moveParam" value=""/>                                                <input type="hidden" id="gridShowAll" name="showAll" value="false"/>												<input type="hidden" id="showAll" name="showAll" value="false"/><table id="table-layout" border="0" cellpadding="0" cellspacing="0"> <!-- Table 1 -->	<tr> <!-- First Block -->		<td id="header" border="0" cellpadding="0" cellspacing="0" colspan="2">    <!--Header Start -->    #parse("snippets/adminHeader.vm")    <!-- Header End -->	</td></tr>	       <td  id="row-tabs" class="tab_bar" colspan="2">		 <table width="100%" cellpadding="0" cellspacing="0" border="0">                     <tr>                         <td width="194"><div class="tab_blank"></div></td>                         <td>&nbsp;</td>                         <td width="656"> 					#springBind("manageSurveyForm.sid")						 <a href="adm_manageSyrvey.do?method=showSurveyInfoView&sid=$status.value"><div class="tab">$brander.getBrandElement("lms.assignEnrollmentSummary.caption.header")</div></a>                     <a href="adm_manageSyrvey.do?method=questionView&sid=$status.value"><div class="tab_selected" style="width:100px;border-right:1px solid #DADADA">$brander.getBrandElement("lms.administrator.searchMember.caption.questions")</div></a>						#if(!$manageSurveyForm.surveyEvent.equals("survey.event.manual") )                     <a href="adm_manageSyrvey.do?method=showCoursesView&sid=$status.value"><div class="tab" style="width:100px;border-right:1px solid #DADADA">$brander.getBrandElement("lms.manageUser.searchLearner.caption.Courses")</div></a>						#end                     <!-- commented as per discussion with faisal <a href="adm_manageSyrvey.do?method=showManageFlags&sid=$status.value"><div class="tab">$brander.getBrandElement("lms.administrator.searchMember.caption.flags")</div></a>-->                     <!--<a href="adm_suggestedTraining.do?sid=$status.value"><div class="tab" style="width:150px;border-right:1px solid #DADADA">$brander.getBrandElement("lms.administrator.searchMember.caption.suggestedtraining")</div></a>-->												  </td>					<td>&nbsp;</td>				</tr>		</table></td>    <!-- Body Start --><tr id="main"> <!-- SECOND BLOCK -->	<td id="left-navigation" valign="top">		<table id="table-bands" border="0" cellpadding="0" cellspacing="0"> <!-- Table 3 -->        #parse("snippets/compliance/complianceLeftMenu.vm")		</table></td>		<TD id="content" >	<div id="scrollable">	#springBind("manageSurveyForm.*")                        #if($status.error)			<div id="message_box">                                <img id="close_message" style="float:right;cursor:pointer"  src="$brander.getBrandElement("lms.errorMessage.pixel.12-em-cross.png")" />                                #foreach($errorCode in $status.errorCodes)                                        #set ($error = $brander.getBrandElement($errorCode))                                        <div class="width40pct">                                                <div class="message_box_align"><img src="$brander.getBrandElement("lms.errorMessage.pixel.addLearner_06.gif")" width="14" height="14" alt="" /></div>                                                <div class="message_box_align">$error</div>                                        </div>                                #end                        </div>                        <!-- error-box -->                        #end                        <div id="delete_message_box" style="display:none;">                            <img id="close_message" onClick="document.getElementById('delete_message_box').style.display='none';" style="float:right;cursor:pointer" src="$brander.getBrandElement("lms.errorMessage.pixel.12-em-cross.png")" />                            <div class="width40pct">                                <div class="message_box_align"><img src="$brander.getBrandElement("lms.errorMessage.pixel.addLearner_06.gif")" width="14" height="14" alt="" /></div>                                <div class="message_box_align">$brander.getBrandElement("lms.survey.addQuestion.caption.deleteQuestionErrorText")</div>                            </div>                        </div>              <!-- Logo+Manage-User -->	<table id="table-page-description" border="0" cellpadding="0" cellspacing="0" style="margin-top:15px;margin-bottom:15px">		    <tr>			<td id="page-icon" class="icon_surveys">			    &nbsp;			</td>			<td id="page-description">			    <div id="page-heading">$brander.getBrandElement("lms.surveys.editsurveyquestions.caption.title")</div>			    <div id="page-help">$brander.getBrandElement("lms.surveys.editsurveyquestions.caption.description")</div>			</td>		    </tr>		</table>			                        <!-- Logo+Manage-User-end -->            <!-- Search Result Start -->            <div id="resultBox" class="search_box_result" >            <!-- Result Header Start -->                        #springBind("manageSurveyForm.surveyQuestions")                        #if ($!{status.value})                                #set($totCount=$!{status.value.size()})                        #else                                #set($totCount=0)                        #end                        <!-- User-list -->                       <div id="searchResult" >                            #springBind("manageSurveyForm.surveyQuestions")                            $pager.setItems($status.value)                            #set($totalCount = $pager.total)                            #if($pager.hasItems())                                    #set($pageFirstIndex = $pager.firstIndex)                                    #set($pageLastIndex = $pager.lastIndex)                                    #set($currentPageSize = $pageLastIndex - $pageFirstIndex + 1)                                    #set($currentPageCount = $pageLastIndex + 1)									  #set($pageCurrIndex = $pager.index)                            #else                                    #set($pageFirstIndex = 0)                                    #set($pageLastIndex = 0)                                    #set($currentPageSize = 0)                                    #set($currentPageCount = 0)									#set($pageCurrIndex = 0)                            #end                            <input type="hidden" id="action" name="action" />                            <input type="hidden" id="sortDirection" name="sortDirection" value="1" />                            <input type="hidden" id="pageIndex" name="pageIndex" value="0" />                            <input type="hidden" id="gridShowAll" name="showAll" value="false" />                            <div id="resultHeader" class="box_header"><!-- Result Header Start -->                                                            <div style="float:left; height:23px;">                    <!-- Result Heading -->								<div style="float:left; margin-top:3px;">								  <a onClick="javascript:window.location='adm_manageSyrvey.do?method=addNewQuestionView';" style="text-decoration:none;">									  <div class="btn_start"></div>									  <div class="btn_normal">$brander.getBrandElement("lms.addQuestion.info.caption.title")</div>									  <div class="btn_end"></div>								  </a>								</div>								<div style="float:left; margin-top:3px;">								  <a onClick="return deleteQuestions('deleteQuestions',$totCount)" style="text-decoration:none;">									  <div class="btn_start"></div>									  <div class="btn_normal">$brander.getBrandElement("lms.addNewSurvey.caption.deleteQuestion")</div>									  <div class="btn_end"></div>								  </a>								</div>                        </div>                                <!-- All Icon -->                               #if($totalCount >10)							   <div id="showAll" class="icon_all" onmouseover="showTooltip('Show All', event);" onmouseout="hideTooltip();" onclick="return onAllPage();"><img  src="$brander.getBrandElement("lms.pixel.checkboxGif")" width="8" height="8" /></div>								#end                                <!-- Next Icon -->                                #if( $pager.nextIndex )                                    <div id="goNext" class="icon_next" onmouseover="showTooltip('Next', event);" onmouseout="hideTooltip();"><input type="image" value="Search" name="_target1" onclick="return onNextPage($pager.nextIndex);" src="$brander.getBrandElement("lms.pixel.arrow-forwardGif")" width="6" height="10"  title="Next Page" /></div>                                #else                                    <div id="goNext" class="icon_disabled">&nbsp;</div>                                                                    #end                                <!-- Back Icon -->                                #if( $pager.prevIndex )                                     <div id="goBack" class="icon_back" onmouseover="showTooltip('Back', event);" onmouseout="hideTooltip();" value="Search" name="_target1" onclick="return onPreviousPage($pager.prevIndex);"><img src="$brander.getBrandElement("lms.pixel.arrow-reviewGif")" width="6" height="10" /></div>                                #else                                    <div id="goBack" class="icon_disabled">&nbsp;</div>                                                                    #end                                <!-- Showing Results -->                                #set($totalCountminus1 = $totalCount - 1)                                    #if($pageFirstIndex == 0 && $pageLastIndex <= 9 && $pageLastIndex!=0)                                            #set($x = $pageFirstIndex+1)                                    #elseif($pageFirstIndex > 0)                                            #set($x = $pageFirstIndex+1)                                    #elseif($pageFirstIndex == 0 && $pageLastIndex == $totalCountminus1)                                            #set($x = $pageFirstIndex+1)                                    #else                                            #set($x = 0)                                    #end                                    #if($pageLastIndex != 0)                                            #set($y = $pageLastIndex+1)                                    #elseif($totalCount == 1)                                            #set($y = 1)                                    #else                                            #set($y = 0)                                    #end									                                <div id="resultDescription" class="box_description">$brander.getBrandElement("lms.manager.manageTrainingPlans.caption.Showing") $x - $y $brander.getBrandElement("lms.manager.manageTrainingPlans.caption.of") $totalCount</div>                            </div>                                                       <div id="searchResult"><!-- searchResult -->                                <table width="100%"  cellpadding="0" cellspacing="0" style="border-top:1px;">                                    <tr bgcolor="#efefef">                                        <td class="check_box_top" width="17px"><input type="checkbox" id="chkAll" onClick="selectAllCheckBoxes($totalCount,$pageFirstIndex,$pageLastIndex);" /></td>                                        <td class="box_subheader">$brander.getBrandElement("lms.listServeyQuestions.caption.Question")</td>                                        <td class="box_subheader" width="30px">$brander.getBrandElement("lms.listServeyQuestions.caption.Order")</td>                                    </tr>                                                                        #set($count = 0)                                    #springBind("manageSurveyForm.surveyQuestions")                                    #set($surveyQuestions = $status.value)                                    #if($currentPageSize > 0)                                        #foreach($loopindex in [$pageFirstIndex..$pageLastIndex])                                                #set($aSurveyQuestion = $!{surveyQuestions.get($loopindex)})                                                #springBind("manageSurveyForm.deleteableQuestions[$loopindex]")                                                #if($count%2 == 0)                                                    #set($alternate="row_1")                                                #else                                                    #set($alternate="row_2")                                                #end                                            <tr>											                                                <td class="$alternate" #if($loopindex==$pageLastIndex) style="width:17px;border-bottom:none;" #else style="width:17px;" #end><input id="deleteableQuestionsChk[$loopindex]" name="deleteableQuestions" type="checkbox" #if($status.value) checked #end onclick="onSelectQuestion(this,'$status.expression',$pageFirstIndex,$pageLastIndex)"/>												<input type="hidden" id="$status.expression" name="$status.expression" value="$status.value"/></td>                                                <td class="$alternate"  #if($loopindex==$pageLastIndex) style="border-bottom:none;" #end>												 #if(!${aSurveyQuestion.id})                                                  #dotPadding($!{aSurveyQuestion.text},60)                                                 #else<a href="adm_manageSyrvey.do?method=editQuestion&editableQuestionId=$!{aSurveyQuestion.id}">#dotPadding($!{aSurveyQuestion.text},80)</a>                                                    #end																								</td>                                                #springBind("manageSurveyForm.published")                                                <td class="$alternate"#if($loopindex==$pageLastIndex) style="width:100px;border-bottom:none;" #else style="width:100px;" #end>										  																						   #if($pageFirstIndex == $count)											   												<div class="move-icons-two">													<div class="icon-move-down" id="q1md" onclick="javascript:changeQuestionOrder($loopindex, 'down');" ></div>													<div class="icon-move-bottom" id="q1mb" onclick="javascript:changeQuestionOrder($loopindex, 'bottom');"></div>												</div>												#elseif($pageFirstIndex != $loopindex && $pageLastIndex !=$loopindex)												<div class="move-icons-all">																									<div class="icon-move-top" id="q2mt" onclick="javascript:changeQuestionOrder($loopindex,'top');"></div>													<div class="icon-move-up" id="q2mu" onclick="javascript:changeQuestionOrder($loopindex, 'up');"></div>													<div class="icon-move-down" id="q2md" onclick="javascript:changeQuestionOrder($loopindex, 'down');"></div>													<div class="icon-move-bottom" id="q2mb" onclick="javascript:changeQuestionOrder($loopindex,'bottom');"></div>											</div>											#else											<div class="move-icons-two">													<div class="icon-move-top" id="q2mt" onclick="javascript:changeQuestionOrder($loopindex, 'top');"></div>													<div class="icon-move-up" id="q2mu" onclick="javascript:changeQuestionOrder($loopindex, 'up');"></div>												</div>												#end                                                </td>                                            </tr>                                            #set($count = $count+1)                                            #end                                           #end                                </table>                                        </div>             </div>	    <input type="hidden" id="pageCurrIndex" name="pageCurrIndex" value="$pageCurrIndex" />		<input type="hidden" id="pageLastIndex" name="pageLastIndex" value="$pageLastIndex" />	     <!-- Search Result End -->	    <!-- <input type="hidden" id="pageCurrIndex" name="pageCurrIndex" value="$pageCurrIndex" />			<div class="$brander.getBrandElement("lms.add-New-Survey-Question_Container.cssClass.managerBtn-popup")">                                <input type="hidden" id="wizardSubmitter" name="wizardSubmitter" />                                <div class="btn-right1">                                     <a class="button" onClick="saveQuestions();"><span class="button">Update</span></a>                                                                     </div>                                <div class="btn-left1">                                     <a class="button" onClick="cancelQuestions();"><span class="button">$brander.getBrandElement("lms.manageUser.addNewLearner.caption.btnCancel")</span></a>                                </div>                        </div> -->                        <!-- scrollable-div -->			                        <!-- space -->                                               <!-- space -->			                                                </div>                <!-- right-pannel-new-content-end -->								<div style="float:right; margin-top:15px;">				  <a onClick="saveQuestions();" style="text-decoration:none;">					  <div class="btn_start"></div>					  <div class="btn_normal">$brander.getBrandElement("lms.accreditation.caption.Save")</div>					  <div class="btn_end"></div>				  </a>				</div>   								<div style="float:right; margin-top:15px;margin-right:5px;">					<a onClick="cancelQuestions();" style="text-decoration:none;">						  <div class="btn_start"></div>						  <div class="btn_normal">$brander.getBrandElement("lms.accreditation.caption.Cancel")</div>						  <div class="btn_end"></div>					</a>				</div>				    </div>        <!-- content-area-end -->        </td></tr><tr> <!-- Footer BLOCK -->	<td id="footer" colspan="2">        <!-- footer -->        #if($userData.isLMSAdministrator() && $adminCurrentMode == 'ROLE_LMSADMINISTRATOR')           #parse("snippets/adminFooter.vm")        #else            #parse("snippets/managerFooter.vm")        #end           <!-- footer-end -->		</td></tr></table><div id='deleteConfirmation' style='display:none'>    <div class='header'><span>$brander.getBrandElement("lms.manageUser.searchLearner.messageBox.pleaseConfirm")</span></div>    <div class="alert_message_box_icon"></div>    <div class="alert_message_box_text">$brander.getBrandElement("lms.survey.editQuestion.messageBox.sure")</div>    <br style="clear:both" /><div class='buttons'>            <div class='simplemodal-close'>            <a class="button" onClick=""><span class="no button">$brander.getBrandElement("lms.manageUser.searchLearner.messageBox.cancel")</span></a>            <a class="button" onClick=""><span class="yes button">$brander.getBrandElement("lms.manageUser.searchLearner.messageBox.OK")</span></a>            </div></div> </div><div id="selectLearner" style="display:none">    <div class="header">$brander.getBrandElement("lms.manageUser.searchLearner.messageBox.warning")</div>    <div class="alert_message_box_icon"></div>    <div class="alert_message_box_text">$brander.getBrandElement("lms.manageUser.searchLearner.messageBox.select")</div>    <br style="clear:both" />    <div class='buttons'>        <div class='no simplemodal-close'>          <a class="button" onClick=""><span class="button">$brander.getBrandElement("lms.manageUser.searchLearner.messageBox.OK")</span></a>        </div>    </div>     </div>	 </form></body></html>